<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Input Pembayaran Siswa</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .kelas-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    .kelas-buttons button {
      padding: 10px 16px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .kelas-buttons button:hover {
      background-color: #388e3c;
    }
    .siswa-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .siswa-button {
      background-color: #fdd835;
      color: #333;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .siswa-button:hover {
      background-color: #fbc02d;
    }
    form {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: auto;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select, button {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    button[type="submit"] {
      background: #4caf50;
      color: white;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h1>Form Pembayaran Siswa</h1>
  <div class="kelas-buttons">
    <button onclick="tampilkanSiswa('Kelas 1')">Kelas 1</button>
    <button onclick="tampilkanSiswa('Kelas 2')">Kelas 2</button>
    <button onclick="tampilkanSiswa('Kelas 3')">Kelas 3</button>
    <button onclick="tampilkanSiswa('Kelas 4')">Kelas 4</button>
    <button onclick="tampilkanSiswa('Kelas 5')">Kelas 5</button>
    <button onclick="tampilkanSiswa('Kelas 6')">Kelas 6</button>
  </div>

  <h2 id="judulKelas"></h2>
  <div id="daftarSiswa" class="siswa-grid"></div>

  <form id="formPembayaran" style="display:none;" onsubmit="kirimData(event)">
    <input type="hidden" id="nisn">
    <label>Nama Siswa</label>
    <input type="text" id="nama" disabled>
    <label>Kelas</label>
    <input type="text" id="kelas" disabled>
    <label>Tagihan</label>
    <select id="tagihan">
      <option value="Infaq Juni 2025">Infaq Juni 2025</option>
      <option value="SPP Semester 1">SPP Semester 1</option>
      <option value="Ujian Akhir">Ujian Akhir</option>
    </select>
    <label>Nominal Bayar</label>
    <input type="number" id="nominal" required>
    <button type="submit">Simpan Pembayaran</button>
  </form>

  <script>
    const siswa = [];
    const kelasList = ['Kelas 1','Kelas 2','Kelas 3','Kelas 4','Kelas 5','Kelas 6'];

    // Dummy data siswa
    kelasList.forEach((kls, idx) => {
      for (let i = 1; i <= 15; i++) {
        siswa.push({
          nama: `Siswa ${i} ${kls}`,
          kelas: kls,
          nisn: `${idx+1}00${i}`
        });
      }
    });

    function tampilkanSiswa(kelas) {
      const list = document.getElementById('daftarSiswa');
      const judul = document.getElementById('judulKelas');
      judul.innerText = `Daftar Siswa ${kelas}`;
      list.innerHTML = '';

      const hasil = siswa.filter(s => s.kelas === kelas);
      hasil.forEach(s => {
        const button = document.createElement('button');
        button.className = 'siswa-button';
        button.textContent = s.nama;
        button.onclick = () => isiForm(s);
        list.appendChild(button);
      });
    }

    function isiForm(data) {
      document.getElementById('formPembayaran').style.display = 'block';
      document.getElementById('nama').value = data.nama;
      document.getElementById('kelas').value = data.kelas;
      document.getElementById('nisn').value = data.nisn;
    }

    function kirimData(e) {
      e.preventDefault();
      const url = "https://script.google.com/macros/s/AKfycbxTE-XyLTXju9cAhDXwkuC2ry1XBcI2nkTYBkOJsy1YjPZBHyfUsWz786O_mlPPuPMw/exec";
      const formData = new FormData();
      formData.append("nisn", document.getElementById('nisn').value);
      formData.append("nama", document.getElementById('nama').value);
      formData.append("kelas", document.getElementById('kelas').value);
      formData.append("tagihan", document.getElementById('tagihan').value);
      formData.append("nominal", document.getElementById('nominal').value);

      fetch(url, {
        method: 'POST',
        body: formData
      })
      .then(response => response.text())
      .then(result => {
        alert("Data berhasil disimpan!");
        document.getElementById('formPembayaran').reset();
        document.getElementById('formPembayaran').style.display = 'none';
      })
      .catch(error => alert("Gagal mengirim data."));
    }
  </script>
</body>
</html>
